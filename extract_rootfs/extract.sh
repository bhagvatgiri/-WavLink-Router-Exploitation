#!/bin/sh

binwalk -e firmware.bin
cp _firmware.bin.extracted/40 .

binwalk -e 40
cp _40.extracted/598000.xz rootfs.cpio.xz

#for some reason, regular xz doesn't work, so one more binwalk
binwalk -e rootfs.cpio.xz
cp _rootfs.cpio.xz.extracted/0 rootfs.cpio

mkdir rootfs
cd rootfs

#this rootfs has symlinks, so we won't upload this rootfs directory, but feel free to run this script to see what we extracted
cpio --no-absolute-filenames -i < ../rootfs.cpio